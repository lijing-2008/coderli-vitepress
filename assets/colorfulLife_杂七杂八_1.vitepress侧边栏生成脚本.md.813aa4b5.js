import{_ as s,c as n,o as a,d as l}from"./app.86a3c011.js";const i=JSON.parse('{"title":"自动生成vitepress侧边栏脚本","description":"","frontmatter":{},"headers":[{"level":2,"title":"编写初衷","slug":"编写初衷","link":"#编写初衷","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[]}],"relativePath":"colorfulLife/杂七杂八/1.vitepress侧边栏生成脚本.md"}'),p={name:"colorfulLife/杂七杂八/1.vitepress侧边栏生成脚本.md"},o=l(`<h1 id="自动生成vitepress侧边栏脚本" tabindex="-1">自动生成vitepress侧边栏脚本 <a class="header-anchor" href="#自动生成vitepress侧边栏脚本" aria-hidden="true">#</a></h1><h2 id="编写初衷" tabindex="-1">编写初衷 <a class="header-anchor" href="#编写初衷" aria-hidden="true">#</a></h2><p>为了方便快捷的生成侧边导航栏，不用一个一个自己手写，写了一个脚本，使用很简单</p><p>脚本如下：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> path </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 动态生成侧边栏函数</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> walk </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dir</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">subDir</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">results</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">list</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readdirSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dir</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">subDir</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#A6ACCD;">list</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">file</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dir</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">subDir</span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">extname</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.md</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#A6ACCD;">results</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">items</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">results</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basename</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.md</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">			link</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sort</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">text</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index2</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">subDir</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		collapsible</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		collapsed</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">		items</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">items</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p><code>walk</code>函数接收两个参数， 第一个参数<code>dir</code>对应的是我们顶部导航栏下的一个子项，即我们的一个专题(侧面导航栏就是专门针对这个专题来生成的)，第二个参数<code>subdir</code>对应的是专题下的多个不同部分，看下面的图会一目了然： <img src="https://img1.imgtp.com/2022/12/14/OhMVKDQ9.png" alt="1670994684085.png"> 在给markdown起名字的时候，为了能够按照我们想要的顺序来，我给每篇文章都加上了序号，用来排序，<code>walk</code>函数中的<code>sort</code>方法就是这个作用,可以看一下我的目录结构：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">docs</span></span>
<span class="line"><span style="color:#A6ACCD;">├── backend</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── nestjs</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   ├── NestJS基础</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 1.九大核心概念.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 2.核心概念小结.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   └── 3.ExecutionContext.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   ├── NestJS进阶</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 1.依赖注入.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 2.生命周期.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 3.打包部署</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">\\23221</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 4.整合prisma</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   ├── 5.高级配置</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   │   └── 6.缓存</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">todo</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   ├── index.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   └── 安全认证</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │       └── 1.登录认证</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">JWT</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">│       ├── index.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       ├── 其它</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 1.日志.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 2.文件关联程序.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   └── 3.HTTP状态码.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       ├── 基础知识</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 1.连接状态模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 2.随机主页模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 3.替换模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 4.文件读取模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   ├── 5.文件压缩模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       │   └── 6.页面缓存模块.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│       └── 配置相关</span></span>
<span class="line"><span style="color:#A6ACCD;">│           ├── 1.默认配置.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│           ├── 2.主配置文件.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│           ├── 3.子配置目录.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│           ├── 4.location.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│           ├── 5.代理.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│           └── 6.proxy代理.md</span></span>
<span class="line"><span style="color:#A6ACCD;">├── colorfulLife</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── index.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── 个人总结</span></span>
<span class="line"><span style="color:#A6ACCD;">│   │   └── 2022年终.md</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── 杂七杂八</span></span>
<span class="line"><span style="color:#A6ACCD;">│       └── 1.vitepress侧边栏生成脚本.md</span></span>
<span class="line"><span style="color:#A6ACCD;">├── frontend</span></span>
<span class="line"><span style="color:#A6ACCD;">├── index.md</span></span>
<span class="line"><span style="color:#A6ACCD;">└── public</span></span>
<span class="line"><span style="color:#A6ACCD;">    └── img</span></span>
<span class="line"><span style="color:#A6ACCD;">        └── logo.png</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-hidden="true">#</a></h2><p>使用时，我会把每一个专题的<code>Sidebar</code>配置单独抽离出来进行配置，例如下面是NestJS专题的<code>Sidebar</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">walk</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../scripts/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> baseDir </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./docs/backend/nestjs/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> nestjsSidebar </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">walk</span><span style="color:#A6ACCD;">(baseDir</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NestJS基础</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">walk</span><span style="color:#A6ACCD;">(baseDir</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NestJS进阶</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">walk</span><span style="color:#A6ACCD;">(baseDir</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">安全认证</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>在<code>vitepress</code>的config.js文件下配置sidebar时只需要引入这个配置就行</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#FFCB6B;">themeConfig</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">sidebar</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/backend/nestjs/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">: </span><span style="color:#A6ACCD;">nestjsSidebar</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>这样一来，只要这个结构弄好之后，我们只需要在对应的文件夹下直接写我们的文章就行了，侧边栏目录结构会自动生成, 希望对大家有所帮助。</p>`,13),e=[o];function c(t,r,y,D,F,A){return a(),n("div",null,e)}const d=s(p,[["render",c]]);export{i as __pageData,d as default};
