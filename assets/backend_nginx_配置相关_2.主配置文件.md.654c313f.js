import{_ as s,c as n,o as a,d as p}from"./app.86a3c011.js";const _=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"backend/nginx/配置相关/2.主配置文件.md"}'),e={name:"backend/nginx/配置相关/2.主配置文件.md"},l=p(`<p><code>nginx.conf</code></p><p><img src="https://cdn.jsdelivr.net/gh/lijing-2008/PicGo/img/20220111071215.png" alt=""></p><h4 id="_1-核心模块" tabindex="-1">① 核心模块 <a class="header-anchor" href="#_1-核心模块" aria-hidden="true">#</a></h4><p><code>CoreModule</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">user nginx</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#nginx自身的用户信息，目的是安全，不使用系统root账户</span></span>
<span class="line"><span style="color:#A6ACCD;">woker_processes auto</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#进程数，一般cpu是几核最多就搞几个</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">error_log /var/log/nginx/error.log notice</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#错误日志</span></span>
<span class="line"><span style="color:#A6ACCD;">pid /var/run/nginx.pid</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#nginx的进程编号存放路径</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-事件驱动模块" tabindex="-1">② 事件驱动模块 <a class="header-anchor" href="#_2-事件驱动模块" aria-hidden="true">#</a></h4><p><code>EventsModule</code> 配置影响nginx服务器或与用户的网络连接。有每个进程的最大连接数，选取哪种事件驱动模型处理连接请求，是否允许同时接受多个网络连接，开启多个网络连接序列化等。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">events{</span></span>
<span class="line"><span style="color:#A6ACCD;">	woeker_connections 1024</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#并发数</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>以上两个模块一般只会修改<em><strong>进程数</strong></em>和<em><strong>并发数</strong></em></p></blockquote><h4 id="_3-http模块" tabindex="-1">③ HTTP模块 <a class="header-anchor" href="#_3-http模块" aria-hidden="true">#</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">http </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    include       /etc/nginx/mime.types</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">#文件--程序</span></span>
<span class="line"><span style="color:#A6ACCD;">    default_type  application/octet-stream</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#默认字节流处理方式</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    log_format  main  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$remote_addr - $remote_user [$time_local] &quot;$request&quot; </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$status $body_bytes_sent &quot;$http_referer&quot; </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    access_log  /var/log/nginx/access.log  main</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#访问日志,采用main格式显示</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    sendfile        on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">#tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    keepalive_timeout  65</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">#gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    include /etc/nginx/conf.d/</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.conf</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>日志相关配置见---[[nginx日志]]</p><h4 id="_4-server块" tabindex="-1">④ server块 <a class="header-anchor" href="#_4-server块" aria-hidden="true">#</a></h4><p>可以放在http模块内部或者单独的自定义配置文件配置文件</p><h4 id="_5-location块" tabindex="-1">⑤ location块 <a class="header-anchor" href="#_5-location块" aria-hidden="true">#</a></h4><p>放在server块中</p>`,16),o=[l];function t(c,r,i,D,d,y){return a(),n("div",null,o)}const A=s(e,[["render",t]]);export{_ as __pageData,A as default};
